#pragma checksum "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "81d75507c19dc88703a0e98e97e0efd6384f4560"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Templates_ControllerGenerator_MvcControllerWithContext), @"mvc.1.0.view", @"/Templates/ControllerGenerator/MvcControllerWithContext.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
using System.Collections.Generic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
using System.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
using System.Reflection;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"81d75507c19dc88703a0e98e97e0efd6384f4560", @"/Templates/ControllerGenerator/MvcControllerWithContext.cshtml")]
    public class Templates_ControllerGenerator_MvcControllerWithContext : Microsoft.VisualStudio.Web.CodeGeneration.Templating.RazorTemplateBase
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 6 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
  
    #region Init Params
    bool isThisAComposedModel = IsThisClassHasAttribute("AspAdminTemplate.Attributes.ComposedAttribute");

    string routePrefix;
    if (String.IsNullOrEmpty(Model.AreaName))
    {
        routePrefix = Model.ControllerRootName;
    }
    else
    {
        routePrefix = Model.AreaName + "/" + Model.ControllerRootName;
    }
    var modelProperties = new List<string>();
    foreach (var property in Model.ModelMetadata.Properties)
    {
        if (property.Scaffold)
        {
            modelProperties.Add(property.PropertyName);
        }
    }

    var bindString = "";
    if (isThisAComposedModel)
    {
        //Remove the first element from bind,(the first element supposed to be the model Primary key)
        var modelPropertiesList = modelProperties;
        modelPropertiesList.RemoveAt(0);
        bindString = string.Join(",", modelPropertiesList);
    }
    else
    {
        bindString = string.Join(",", modelProperties);
    }


    var contextTypeName = Model.ContextTypeName;
    var entitySetName = Model.ModelMetadata.EntitySetName;
    var entitySetVar = Model.EntitySetVariable ??
        (String.IsNullOrEmpty(entitySetName)
            ? entitySetName
            : (entitySetName.Substring(0, length: 1).ToLowerInvariant() + entitySetName.Substring(1)));
    var primaryKeyName = Model.ModelMetadata.PrimaryKeys[0].PropertyName;
    var primaryKeyShortTypeName = Model.ModelMetadata.PrimaryKeys[0].ShortTypeName;
    var primaryKeyType = Model.ModelMetadata.PrimaryKeys[0].TypeName;
    var primaryKeyNullableTypeName = GetNullableTypeName(primaryKeyType, primaryKeyShortTypeName);
    var lambdaVar = Model.ModelVariable[0];
    var relatedProperties = new Dictionary<string, dynamic>();
    foreach (var nav in Model.ModelMetadata.Navigations)
    {
        relatedProperties.Add(nav.AssociationPropertyName, nav);

    }

    var inlineIncludes = "";
    foreach (var property in relatedProperties.Values)
    {
        inlineIncludes += string.Format("{0}                .Include({1} => {1}.{2})", Environment.NewLine, lambdaVar, property.AssociationPropertyName);
    }
    #endregion

    #region Preparing api attributes and its params
    List<(PropertyInfo[] props, dynamic attribute)> apiAttributes = GetModelClassCustomAttributesListProperties("AspAdminTemplate.Attributes.APIAttribute");

    ApiAttribute isGet= new ApiAttribute(false,-1,"","");
    ApiAttribute isList= new ApiAttribute(false,-1,"","");
    ApiAttribute isPaginated= new ApiAttribute(false,-1,"","");
    ApiAttribute isPost= new ApiAttribute(false,-1,"","");
    ApiAttribute isDelete= new ApiAttribute(false,-1,"","");
    ApiAttribute isPatch= new ApiAttribute(false,-1,"","");
    ApiAttribute isPut= new ApiAttribute(false,-1,"","");

    for (int i = 0; i < apiAttributes.Count; i++)
    {
        string apiFlag =  apiAttributes[i].props.FirstOrDefault(x => x.Name == "ApiFlag").GetValue(apiAttributes[i].attribute).ToString();
        string apiBaseUrl = apiAttributes[i].props.FirstOrDefault(x => x.Name == "BaseUrl").GetValue(apiAttributes[i].attribute);
        string apiEndPoint = apiAttributes[i].props.FirstOrDefault(x => x.Name == "Endpoint").GetValue(apiAttributes[i].attribute);

        if (apiFlag.Contains("Get"))
        {
            isGet.IsExist = true;
            isGet.Index = i;
            isGet.BaseUrl = apiBaseUrl;
            isGet.EndPoint = apiEndPoint;
        }

        if (apiFlag.Contains("List"))
        {
            isList.IsExist = true;
            isList.Index = i;
            isList.BaseUrl = apiBaseUrl;
            isList.EndPoint = apiEndPoint;
        }

        if (apiFlag.Contains("Paginated"))
        {
            isPaginated.IsExist = true;
            isPaginated.Index = i;
            isPaginated.BaseUrl = apiBaseUrl;
            isPaginated.EndPoint = apiEndPoint;
        }

        if (apiFlag.Contains("Post"))
        {
            isPost.IsExist = true;
            isPost.Index = i;
            isPost.BaseUrl = apiBaseUrl;
            isPost.EndPoint = apiEndPoint;
        }

        if (apiFlag.Contains("Delete"))
        {
            isDelete.IsExist = true;
            isDelete.Index = i;
            isDelete.BaseUrl = apiBaseUrl;
            isDelete.EndPoint = apiEndPoint;
        }

        if (apiFlag.Contains("Patch"))
        {
            isPatch.IsExist = true;
            isPatch.Index = i;
            isPatch.BaseUrl = apiBaseUrl;
            isPatch.EndPoint = apiEndPoint;
        }

        if (apiFlag.Contains("Put"))
        {
            isPut.IsExist = true;
            isPut.Index = i;
            isPut.BaseUrl = apiBaseUrl;
            isPut.EndPoint = apiEndPoint;
        }
    }

    bool isThereAtLeastOneAPiCall = isGet.IsExist || isList.IsExist || isPaginated.IsExist || isPost.IsExist || isDelete.IsExist || isPatch.IsExist || isPut.IsExist;
    #endregion

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
#nullable restore
#line 145 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
  
    RenderNameSpaces(isThereAtLeastOneAPiCall);
    RenderOpenNameSpace();
    RenderAreaAttribute();
    RenderControllerClass(entitySetName, primaryKeyName, relatedProperties, lambdaVar, entitySetVar,primaryKeyNullableTypeName,routePrefix,inlineIncludes,isThisAComposedModel,bindString,primaryKeyType,primaryKeyShortTypeName
        ,apiAttributes,isGet,isList,isPaginated,isPost,isDelete,isPatch,isPut,isThereAtLeastOneAPiCall);
    RenderCloseNameSpace();

#line default
#line hidden
#nullable disable
            WriteLiteral("                             \r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
            WriteLiteral("\r\n");
        }
        #pragma warning restore 1998
#nullable restore
#line 154 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                             
    #region main functions
    void RenderNameSpaces(bool isThereAtLeastOneAPiCall)
    {
        //Default Name spaces
        

#line default
#line hidden
#nullable disable
        WriteLiteral(@"
            using System;
            using System.Collections.Generic;
            using System.Linq;
            using System.Threading.Tasks;
            using Microsoft.AspNetCore.Mvc;
            using Microsoft.AspNetCore.Mvc.Rendering;
            using Microsoft.EntityFrameworkCore;
            using X.PagedList;
        ");
#nullable restore
#line 168 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               

        if (isThereAtLeastOneAPiCall)
        {
            

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                using System.Net.Http;\r\n                using Newtonsoft.Json;\r\n                using System.Net;\r\n                using AspAdminTemplate.Services.ApiServices;\r\n                using AspAdminTemplate.Models;\r\n            ");
#nullable restore
#line 178 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                   
        }

        //add all the required name spaces that we didn't already addedd.
        foreach (var namespaceName in Model.RequiredNamespaces)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("using ");
#nullable restore
#line 184 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               Write(namespaceName);

#line default
#line hidden
#nullable disable
        WriteLiteral(";\r\n");
#nullable restore
#line 185 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
    }

    void RenderOpenNameSpace()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            namespace ");
#nullable restore
#line 191 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                 Write(Model.ControllerNamespace);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            {\r\n        ");
#nullable restore
#line 193 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderAreaAttribute()
    {
        if (!string.IsNullOrEmpty(Model.AreaName))
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
#nullable restore
#line 200 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
         Write(string.Format("[Area(\"{0}\")]", Model.AreaName));

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 201 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
    }

    void RenderControllerClass(dynamic entitySetName, dynamic primaryKeyName, Dictionary<string, dynamic> relatedProperties, dynamic lambdaVar, dynamic entitySetVar,dynamic primaryKeyNullableTypeName,string routePrefix,string inlineIncludes,bool isThisAComposedModel,string bindString,dynamic primaryKeyType,dynamic primaryKeyShortTypeName
            ,List<(PropertyInfo[] props, dynamic attribute)> apiAttributes,ApiAttribute isGet,ApiAttribute isList,ApiAttribute isPaginated,ApiAttribute isPost,ApiAttribute isDelete,ApiAttribute isPatch,ApiAttribute isPut,bool isThereAtLeastOneAPiCall)
    {

        RenderControllerClassHeader(isThereAtLeastOneAPiCall);

        DefaultSortAttribute defaultSort = GetDefaultSort();
        if (isList.IsExist)
        {
            RenderIndexApiFunction(entitySetName, primaryKeyName, relatedProperties, lambdaVar, entitySetVar,routePrefix,defaultSort
                ,isList);
        }
        else if(isPaginated.IsExist)
        {
            RenderIndexPaginatedApiFunction(entitySetName, primaryKeyName, relatedProperties, lambdaVar, entitySetVar,routePrefix,defaultSort
                ,isPaginated);
        }
        else
        {
            RenderIndexFunction(entitySetName, primaryKeyName, relatedProperties, lambdaVar, entitySetVar,routePrefix,defaultSort);
        }

        if (!isGet.IsExist)
        {
            RenderDetailsFunction(entitySetName, inlineIncludes, primaryKeyName, primaryKeyNullableTypeName, routePrefix);
        }
        else
        {
            RenderDetailsApiFunction(entitySetName, primaryKeyName, primaryKeyNullableTypeName, routePrefix
                ,isGet);
        }

        if (!isPost.IsExist)
        {
            RenderCreateViewFunction(routePrefix,isThisAComposedModel,relatedProperties);
            RenderCreateFunction(routePrefix,bindString,primaryKeyType,primaryKeyName,isThisAComposedModel,relatedProperties);
        }
        else
        {
            //Todo update this to work with api
            RenderCreateViewFunction(routePrefix,isThisAComposedModel,relatedProperties);
            RenderCreateApiFunction(routePrefix,bindString,primaryKeyType,primaryKeyName,isThisAComposedModel,relatedProperties,isPost);
        }


        if (!isPatch.IsExist && !isPut.IsExist)
        {
            RenderEditViewFunction(routePrefix,primaryKeyNullableTypeName,entitySetName,relatedProperties);
            RenderEditFunction(routePrefix,primaryKeyShortTypeName,bindString,primaryKeyName,relatedProperties);
        }
        else if(isPut.IsExist){
            RenderEditViewAPIFunction(routePrefix,primaryKeyNullableTypeName,entitySetName,relatedProperties, primaryKeyName ,isGet);
            RenderEditAPIFunction(routePrefix,primaryKeyShortTypeName,bindString,primaryKeyType,primaryKeyName,isThisAComposedModel,relatedProperties,isPut);
        }

        if (!isDelete.IsExist)
        {
            RenderDeleteViewFunction(routePrefix,primaryKeyNullableTypeName,entitySetName,inlineIncludes,primaryKeyName);
            RenderDeleteFunction(routePrefix,primaryKeyShortTypeName,entitySetName);
        }
        else
        {
            RenderDeleteViewApiFunction(routePrefix,primaryKeyNullableTypeName,entitySetName,inlineIncludes,primaryKeyName
                ,isDelete);
            RenderDeleteApiFunction(routePrefix,primaryKeyShortTypeName,entitySetName
                ,isDelete);
        }

        RenderOtherFunction(primaryKeyShortTypeName,entitySetName,primaryKeyName);

        RenderControllerClassFooter();
    }

    void RenderCloseNameSpace()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            }\r\n        ");
#nullable restore
#line 281 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 286 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Class Functions
    void RenderControllerClassHeader(bool isThereAtLeastOneAPiCall)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            public class ");
#nullable restore
#line 291 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    Write(Model.ControllerName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" : Controller\r\n            {\r\n                private readonly ");
#nullable restore
#line 293 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                            Write(Model.ContextTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" _context;\r\n");
#nullable restore
#line 294 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                 if (isThereAtLeastOneAPiCall) { 

#line default
#line hidden
#nullable disable
        WriteLiteral("                    ");
        WriteLiteral("private readonly GenericApiService _genericApiService;\r\n                    ");
        WriteLiteral("\r\n                    ");
        WriteLiteral("public ");
#nullable restore
#line 297 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                         Write(Model.ControllerName);

#line default
#line hidden
#nullable disable
        WriteLiteral("(");
#nullable restore
#line 297 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                Write(Model.ContextTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" context, GenericApiService genericApiService)\r\n");
#nullable restore
#line 298 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                }else{

#line default
#line hidden
#nullable disable
        WriteLiteral("                    ");
        WriteLiteral("public ");
#nullable restore
#line 299 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                         Write(Model.ControllerName);

#line default
#line hidden
#nullable disable
        WriteLiteral("(");
#nullable restore
#line 299 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                Write(Model.ContextTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" context)\r\n");
#nullable restore
#line 300 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                }

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                {\r\n                    _context = context;\r\n");
#nullable restore
#line 304 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                     if (isThereAtLeastOneAPiCall) {

#line default
#line hidden
#nullable disable
        WriteLiteral("                        ");
        WriteLiteral("_genericApiService = genericApiService;\r\n");
#nullable restore
#line 306 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    }

#line default
#line hidden
#nullable disable
        WriteLiteral("                }\r\n        ");
#nullable restore
#line 308 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderIndexFunction(dynamic entitySetName, dynamic primaryKeyName, Dictionary<string, dynamic> relatedProperties, dynamic lambdaVar, dynamic entitySetVar,string routePrefix,DefaultSortAttribute defaultSort)
    {
        List<PropertyInfo> searchableProps = GetPropsByAttribute("AspAdminTemplate.Attributes.SearchableAttribute");


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("// GET: ");
#nullable restore
#line 315 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 316 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        RenderIndexHeader(searchableProps.Count());

        RenderViewBagsInitBlock();

        RenderSelectBlock(entitySetName);

        if (searchableProps.Count() > 0)
        {
            RenderSearchBlock(searchableProps, entitySetName);
        }

        RenderSortSwitchBlock(entitySetName, primaryKeyName,defaultSort,false);

        RenderIndexReturn(entitySetName, primaryKeyName,relatedProperties,lambdaVar,entitySetVar);

        RenderIndexFooter();
    }

    void RenderDetailsFunction(dynamic entitySetName,string inlineIncludes,dynamic primaryKeyName,dynamic primaryKeyNullableTypeName,string routePrefix)
    {
        List<PropertyInfo> composedProps = GetPropsByAttribute("AspAdminTemplate.Attributes.CompositionAttribute");


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("// GET: ");
#nullable restore
#line 338 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("/Details/5\r\n");
#nullable restore
#line 339 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        RenderDetailsHeader(composedProps,primaryKeyNullableTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.returnUrl = Request.Headers[\"Referer\"].ToString();\r\n");
#nullable restore
#line 341 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        RenderCheckIdBlock();

        RenderGetDetailBlock(entitySetName,inlineIncludes,primaryKeyName);

        RenderTupleViewOrNormalViewReturn(composedProps);

        RenderDetailsFooter();
    }

    void RenderCreateViewFunction(string routePrefix,bool isThisAComposedModel,Dictionary<string, dynamic> relatedProperties)
    {
        RenderCreateViewHeader(routePrefix,isThisAComposedModel);

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.returnUrl = Request.Headers[\"Referer\"].ToString();\r\n");
#nullable restore
#line 354 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        string attributeName = "AspAdminTemplate.Attributes.ForeignKeyDisplayAsAttribute";
        List<PropertyInfo> attributeProps = GetPropsByAttribute(attributeName);
        if (attributeProps.Count > 0)
        {
            RenderForeignKeyDisplayAsAttributeViewData(attributeName,attributeProps,relatedProperties);
        }
        else
        {
            RenderCreateViewViewData(relatedProperties);
        }

        RenderCreateViewFooter();
    }

    void RenderCreateFunction(string routePrefix,string bindString,dynamic primaryKeyType,dynamic primaryKeyName,bool isThisAComposedModel,Dictionary<string, dynamic> relatedProperties)
    {
        RenderCreateHeader(routePrefix,bindString);
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                if (ModelState.IsValid)\r\n                {\r\n        ");
#nullable restore
#line 375 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
        if (!string.IsNullOrEmpty(primaryKeyType) && IsGuid(primaryKeyType))
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
#nullable restore
#line 378 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
          Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 378 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                Write(primaryKeyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = Guid.NewGuid();\r\n");
#nullable restore
#line 379 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("_context.Add(");
#nullable restore
#line 380 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                  Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n        ");
        WriteLiteral("await _context.SaveChangesAsync();\r\n");
#nullable restore
#line 382 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        //Render the composable version of the create function (using the parent id)
        if (isThisAComposedModel)
        {
            foreach (var property in relatedProperties.Values)
            {

#line default
#line hidden
#nullable disable
        WriteLiteral("                ");
        WriteLiteral("TempData[\"Id\"] = ");
#nullable restore
#line 388 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                               Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 388 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                      Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral(";\r\n                ");
        WriteLiteral("return RedirectToAction(\"Details\",\"");
#nullable restore
#line 389 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                 Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral("s\");\r\n");
#nullable restore
#line 390 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
            }
        }
        else
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("return Redirect(returnUrl);\r\n");
#nullable restore
#line 395 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("}\r\n");
#nullable restore
#line 398 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        foreach (var property in relatedProperties.Values)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 401 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = new SelectList(_context.");
#nullable restore
#line 401 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                      Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 401 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 401 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                Write(property.DisplayPropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", ");
#nullable restore
#line 401 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                 Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 401 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                                       Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n");
#nullable restore
#line 402 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        }

        RenderCreateFooter();
    }

    void RenderEditViewFunction(string routePrefix, dynamic primaryKeyNullableTypeName,dynamic entitySetName,Dictionary<string, dynamic> relatedProperties)
    {
        RenderEditViewHeader(routePrefix,primaryKeyNullableTypeName);
    

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.returnUrl = Request.Headers[\"Referer\"].ToString();\r\n");
        WriteLiteral("\r\n            if (id == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var ");
#nullable restore
#line 419 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = await _context.");
#nullable restore
#line 419 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                  Write(entitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(".FindAsync(id);\r\n            if (");
#nullable restore
#line 420 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n        ");
#nullable restore
#line 424 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               

        foreach (var property in relatedProperties.Values)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 428 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = new SelectList(_context.");
#nullable restore
#line 428 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                      Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 428 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 428 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                Write(property.DisplayPropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", ");
#nullable restore
#line 428 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                 Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 428 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                                       Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n");
#nullable restore
#line 429 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }

        RenderEditViewFooter();
    }

    void RenderEditFunction(string routePrefix,dynamic primaryKeyShortTypeName,string bindString,dynamic primaryKeyName,Dictionary<string, dynamic> relatedProperties)
    {
        RenderEditHeader(routePrefix,primaryKeyShortTypeName,bindString);

        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            if (id != ");
#nullable restore
#line 439 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                 Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 439 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                      Write(primaryKeyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(")\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            if (ModelState.IsValid)\r\n            {\r\n                try\r\n                {\r\n                    _context.Update(");
#nullable restore
#line 448 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                               Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n                    await _context.SaveChangesAsync();\r\n                }\r\n                catch (DbUpdateConcurrencyException)\r\n                {\r\n                    if (!");
#nullable restore
#line 453 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                     Write(Model.ModelTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral("Exists(");
#nullable restore
#line 453 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                 Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 453 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                      Write(primaryKeyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(@"))
                    {
                        return NotFound();
                    }
                    else
                    {
                        throw;
                    }
                }
                return Redirect(returnUrl);
            }
        ");
#nullable restore
#line 464 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               

        foreach (var property in relatedProperties.Values)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 468 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = new SelectList(_context.");
#nullable restore
#line 468 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                      Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 468 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 468 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                Write(property.DisplayPropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", ");
#nullable restore
#line 468 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                 Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 468 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                                       Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n");
#nullable restore
#line 469 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }

        RenderEditFooter();
    }

    void RenderDeleteViewFunction(string routePrefix,dynamic primaryKeyNullableTypeName,dynamic entitySetName,string inlineIncludes,dynamic primaryKeyName)
    {
        RenderDeleteViewHeader(routePrefix,primaryKeyNullableTypeName);


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.returnUrl = Request.Headers[\"Referer\"].ToString();\r\n");
        WriteLiteral("\r\n            if (id == null)\r\n            {\r\n            return NotFound();\r\n            }\r\n\r\n            var ");
#nullable restore
#line 485 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = await _context.");
#nullable restore
#line 485 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                  Write(entitySetName);

#line default
#line hidden
#nullable disable
#nullable restore
#line 485 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                 Write(inlineIncludes);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            .FirstOrDefaultAsync(m => m.");
#nullable restore
#line 486 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                   Write(primaryKeyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" == id);\r\n            if (");
#nullable restore
#line 487 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" == null)\r\n            {\r\n            return NotFound();\r\n            }\r\n        ");
#nullable restore
#line 491 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               

        RenderDeleteViewFooter();
    }

    void RenderDeleteFunction(string routePrefix,dynamic primaryKeyShortTypeName,dynamic entitySetName)
    {
        RenderDeleteHeader(routePrefix,primaryKeyShortTypeName);

        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            var ");
#nullable restore
#line 501 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = await _context.");
#nullable restore
#line 501 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                  Write(entitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(".FindAsync(id);\r\n            _context.");
#nullable restore
#line 502 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                 Write(entitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(".Remove(");
#nullable restore
#line 502 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                        Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n            await _context.SaveChangesAsync();\r\n        ");
#nullable restore
#line 504 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               

        RenderDeleteFooter();
    }

    void RenderOtherFunction(dynamic primaryKeyShortTypeName,dynamic entitySetName,dynamic primaryKeyName)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            private bool ");
#nullable restore
#line 512 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                     Write(Model.ModelTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral("Exists(");
#nullable restore
#line 512 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                 Write(primaryKeyShortTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" id)\r\n            {\r\n                return _context.");
#nullable restore
#line 514 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                            Write(entitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(".Any(e => e.");
#nullable restore
#line 514 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                       Write(primaryKeyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" == id);\r\n            }\r\n        ");
#nullable restore
#line 516 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderControllerClassFooter()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            }\r\n        ");
#nullable restore
#line 523 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

    #region API Functions

    void RenderIndexApiFunction(dynamic entitySetName, dynamic primaryKeyName, Dictionary<string, dynamic> relatedProperties, dynamic lambdaVar, dynamic entitySetVar,string routePrefix,DefaultSortAttribute defaultSort
        ,ApiAttribute isList)
    {
        List<PropertyInfo> searchableProps = GetPropsByAttribute("AspAdminTemplate.Attributes.SearchableAttribute");


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("// GET: ");
#nullable restore
#line 534 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 535 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        RenderIndexHeader(searchableProps.Count());

        RenderViewBagsInitBlock();

        RenderApiSelectBlock(entitySetName,isList);

        if (searchableProps.Count() > 0)
        {
            RenderSearchBlock(searchableProps, entitySetName);
        }

        RenderSortSwitchBlock(entitySetName, primaryKeyName,defaultSort,true);

        RenderIndexReturn(entitySetName, primaryKeyName,relatedProperties,lambdaVar,entitySetVar);

        RenderIndexFooter();
    }

    void RenderIndexPaginatedApiFunction(dynamic entitySetName, dynamic primaryKeyName, Dictionary<string, dynamic> relatedProperties, dynamic lambdaVar, dynamic entitySetVar,string routePrefix,DefaultSortAttribute defaultSort
        ,ApiAttribute isPaginated)
    {
        List<PropertyInfo> searchableProps = GetPropsByAttribute("AspAdminTemplate.Attributes.SearchableAttribute");


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("// GET: ");
#nullable restore
#line 558 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 559 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        RenderIndexHeader(searchableProps.Count());

        RenderViewBagsInitBlock();

        RenderPaginatedApiSelectBlock(entitySetName,isPaginated);

        if (searchableProps.Count() > 0)
        {
            RenderSearchBlock(searchableProps, entitySetName);
        }

        //RenderSortSwitchBlock(entitySetName, primaryKeyName,defaultSort,true);

        RenderPaginatedApiIndexReturn(entitySetName, primaryKeyName,relatedProperties,lambdaVar,entitySetVar);

        RenderIndexFooter();
    }

    void RenderDetailsApiFunction(dynamic entitySetName,dynamic primaryKeyName,dynamic primaryKeyNullableTypeName,string routePrefix
        ,ApiAttribute isGet)
    {
        List<PropertyInfo> composedProps = GetPropsByAttribute("AspAdminTemplate.Attributes.CompositionAttribute");


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("// GET: ");
#nullable restore
#line 582 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("/Details/5\r\n");
#nullable restore
#line 583 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        RenderDetailsHeader(composedProps,primaryKeyNullableTypeName);


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.returnUrl = Request.Headers[\"Referer\"].ToString();\r\n");
#nullable restore
#line 586 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        RenderCheckIdBlock();

        RenderGetApiDetailBlock(entitySetName,primaryKeyName,isGet);

        RenderTupleViewOrNormalViewReturn(composedProps,true);

        RenderDetailsFooter();
    }

    void RenderCreateApiFunction(string routePrefix, string bindString, dynamic primaryKeyType, dynamic primaryKeyName, bool isThisAComposedModel, Dictionary<string, dynamic> relatedProperties,ApiAttribute isPost)
    {
        RenderCreateHeader(routePrefix,bindString);
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                if (ModelState.IsValid)\r\n                {\r\n        ");
        WriteLiteral("\r\n");
        WriteLiteral("        ");
        WriteLiteral("_genericApiService.SetBaseUrl(\"");
#nullable restore
#line 604 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                     Write(isPost.BaseUrl);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n        ");
        WriteLiteral("await _genericApiService.ApiPost< ");
#nullable restore
#line 605 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                        Write(Model.ModelTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(">($\"");
#nullable restore
#line 605 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                  Write(isPost.EndPoint);

#line default
#line hidden
#nullable disable
        WriteLiteral("\",");
#nullable restore
#line 605 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                     Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n");
#nullable restore
#line 606 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        //Render the composable version of the create function (using the parent id)
        if (isThisAComposedModel)
        {
            //TODO change this to work with api
            foreach (var property in relatedProperties.Values)
            {

#line default
#line hidden
#nullable disable
        WriteLiteral("                ");
        WriteLiteral("TempData[\"Id\"] = ");
#nullable restore
#line 613 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                               Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 613 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                      Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral(";\r\n                ");
        WriteLiteral("return RedirectToAction(\"Details\",\"");
#nullable restore
#line 614 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                 Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral("s\");\r\n");
#nullable restore
#line 615 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
            }
        }
        else
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("return Redirect(returnUrl);\r\n");
#nullable restore
#line 620 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("}\r\n");
#nullable restore
#line 623 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        //Todo change this to work with api
        foreach (var property in relatedProperties.Values)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 627 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = new SelectList(_context.");
#nullable restore
#line 627 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                      Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 627 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 627 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                Write(property.DisplayPropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", ");
#nullable restore
#line 627 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                 Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 627 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                                       Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n");
#nullable restore
#line 628 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        }

        RenderCreateFooter();
    }
    
    void RenderEditViewAPIFunction(string routePrefix, dynamic primaryKeyNullableTypeName,dynamic entitySetName,Dictionary<string, dynamic> relatedProperties,dynamic primaryKeyName
        ,ApiAttribute isGet)
    {
        RenderEditViewHeader(routePrefix,primaryKeyNullableTypeName);
    

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.returnUrl = Request.Headers[\"Referer\"].ToString();\r\n");
        WriteLiteral("\r\n            if (id == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n        ");
#nullable restore
#line 646 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               

        RenderGetApiDetailBlock(entitySetName,primaryKeyName,isGet);

        RenderEditViewFooter();
    }

    void RenderEditAPIFunction(string routePrefix,dynamic primaryKeyShortTypeName, string bindString, dynamic primaryKeyType, dynamic primaryKeyName, bool isThisAComposedModel, Dictionary<string, dynamic> relatedProperties,ApiAttribute isPut)
    {
        RenderEditHeader(routePrefix,primaryKeyShortTypeName,bindString);
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            if (ModelState.IsValid)\r\n            {\r\n        ");
        WriteLiteral("\r\n");
        WriteLiteral("        ");
        WriteLiteral("_genericApiService.SetBaseUrl(\"");
#nullable restore
#line 661 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                     Write(isPut.BaseUrl);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n        ");
        WriteLiteral("await _genericApiService.ApiPut< ");
#nullable restore
#line 662 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                       Write(Model.ModelTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(">($\"");
#nullable restore
#line 662 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                 Write(isPut.EndPoint);

#line default
#line hidden
#nullable disable
        WriteLiteral("\",");
#nullable restore
#line 662 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                   Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n        ");
        WriteLiteral("return Redirect(returnUrl);\r\n        ");
        WriteLiteral("}\r\n");
#nullable restore
#line 665 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        RenderEditFooter();

    }

    void RenderDeleteViewApiFunction(string routePrefix, dynamic primaryKeyNullableTypeName, dynamic entitySetName, string inlineIncludes, dynamic primaryKeyName
        , ApiAttribute isDelete)
    {
        RenderDeleteViewHeader(routePrefix, primaryKeyNullableTypeName);


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.returnUrl = Request.Headers[\"Referer\"].ToString();\r\n");
        WriteLiteral("\r\n            if (id == null)\r\n            {\r\n            return NotFound();\r\n            }\r\n        ");
#nullable restore
#line 682 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
        RenderGetApiDetailBlock(entitySetName, primaryKeyName, isDelete);

        RenderDeleteViewFooter();
    }

    void RenderDeleteApiFunction(string routePrefix, dynamic primaryKeyShortTypeName, dynamic entitySetName
        , ApiAttribute isDelete)
    {
        RenderDeleteHeader(routePrefix, primaryKeyShortTypeName);

        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            _genericApiService.SetBaseUrl(\"");
#nullable restore
#line 694 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                       Write(isDelete.BaseUrl);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n            await _genericApiService.ApiDelete($\"");
#nullable restore
#line 695 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                             Write(isDelete.EndPoint);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n        ");
#nullable restore
#line 696 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               

        RenderDeleteFooter();
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 704 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Index Functions

    /// <summary>
    /// Render the Index header depending on the searchable Props
    /// </summary>
    /// <param name="searchablePropsCount">the number of the props that has a searchable attribute</param>
    void RenderIndexHeader(int searchablePropsCount)
    {
        if (searchablePropsCount > 0)
        {
            

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                public async Task<IActionResult> Index(string sortOrder, string currentFilter, string searchString, int? page)\r\n                {\r\n            ");
#nullable restore
#line 718 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                   
        }
        else
        {
            

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                public async Task<IActionResult> Index(string sortOrder, string currentFilter, int ? page)\r\n                {\r\n            ");
#nullable restore
#line 725 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                   
        }
    }

    void RenderViewBagsInitBlock()
    {

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("ViewBag.CurrentSort = sortOrder;\r\n");
#nullable restore
#line 732 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        foreach (var property in Model.ModelMetadata.Properties)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("ViewBag.");
#nullable restore
#line 734 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                  Write(property.PropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("SortParm = String.IsNullOrEmpty(sortOrder) ? \"");
#nullable restore
#line 734 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                        Write(property.PropertyName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral("_desc\" : \"\";\r\n");
#nullable restore
#line 735 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
    }

    void RenderSelectBlock(dynamic entitySetName)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            int pageSize = 8;\r\n            int pageNumber = (page ?? 1);\r\n            \r\n            var ");
#nullable restore
#line 744 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
            Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(" = from x in _context.");
#nullable restore
#line 744 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                            Write(entitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" select x;\r\n\r\n        ");
#nullable restore
#line 746 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderSearchBlock(List<PropertyInfo> props, dynamic entitySetName)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral(@"
            if (searchString != null)
            {
            page = 1;
            }
            else
            {
            searchString = currentFilter;
            }

            ViewBag.CurrentFilter = searchString;

            if(!String.IsNullOrEmpty(searchString))
            {
            ");
#nullable restore
#line 765 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(" = ");
#nullable restore
#line 765 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                     Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(".Where(x=>\r\n        ");
#nullable restore
#line 766 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
        for (int i = 0; i < props.Count(); i++)
        {
            string searchableString = props[i].Name;
            if (props[i].PropertyType != typeof(string))
            {
                searchableString += ".ToString()";
            }
            if (GetAttributeValue(props[i], "AspAdminTemplate.Attributes.SearchableAttribute", "SearchTypeValue") == "Like")
            {
                searchableString += ".Contains(searchString)";
            }
            else
            {
                searchableString += " == searchString";
            }

            if (i + 1 != props.Count())
            {
                searchableString += " || ";
            }

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("x.");
#nullable restore
#line 787 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(searchableString);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 788 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            );\r\n            }\r\n\r\n        ");
#nullable restore
#line 793 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderSortSwitchBlock(dynamic entitySetName, dynamic primaryKeyName,DefaultSortAttribute defaultSort,bool convertResulToList)
    {

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
#nullable restore
#line 798 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
      Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(" = sortOrder switch\r\n        ");
        WriteLiteral("{\r\n");
#nullable restore
#line 800 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

        foreach (var property in Model.ModelMetadata.Properties)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("\"");
#nullable restore
#line 803 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(property.PropertyName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral("_desc\"=>  ");
#nullable restore
#line 803 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                       Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(".OrderByDescending(x => x.");
#nullable restore
#line 803 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                           Write(property.PropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(")");
#nullable restore
#line 803 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                    Write(GetDotToListString(convertResulToList));

#line default
#line hidden
#nullable disable
        WriteLiteral(",\r\n");
#nullable restore
#line 804 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }

        if (defaultSort.IsExist) {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("_ => ");
#nullable restore
#line 807 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 807 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                          Write(GetOrderByString(defaultSort.IsAsc));

#line default
#line hidden
#nullable disable
        WriteLiteral("(x => x.");
#nullable restore
#line 807 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                        Write(defaultSort.PropName);

#line default
#line hidden
#nullable disable
        WriteLiteral(")");
#nullable restore
#line 807 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                Write(GetDotToListString(convertResulToList));

#line default
#line hidden
#nullable disable
        WriteLiteral(",\r\n");
#nullable restore
#line 808 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
        else { 

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("_ => ");
#nullable restore
#line 810 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(".");
#nullable restore
#line 810 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                          Write(GetOrderByString(defaultSort.IsAsc));

#line default
#line hidden
#nullable disable
        WriteLiteral("(x => x.");
#nullable restore
#line 810 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                       Write(primaryKeyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(")");
#nullable restore
#line 810 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                        Write(GetDotToListString(convertResulToList));

#line default
#line hidden
#nullable disable
        WriteLiteral(",\r\n");
#nullable restore
#line 811 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }


#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("};\r\n        ");
        WriteLiteral("\r\n");
#nullable restore
#line 815 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
    }

    void RenderIndexReturn(dynamic entitySetName, dynamic primaryKeyName, Dictionary<string, dynamic> relatedProperties, dynamic lambdaVar, dynamic entitySetVar)
    {
        var includeExpressions = "";
        includeExpressions = String.Join("", relatedProperties
        .Values
        .Select(property => String.Format(".Include({0} => {0}.{1})", lambdaVar, property.AssociationPropertyName)));
        if (!String.IsNullOrEmpty(includeExpressions))
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("var ");
#nullable restore
#line 825 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(entitySetVar);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = ");
#nullable restore
#line 825 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                              Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
#nullable restore
#line 825 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                       Write(includeExpressions);

#line default
#line hidden
#nullable disable
        WriteLiteral(";\r\n            ");
        WriteLiteral("var result = await ");
#nullable restore
#line 826 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                             Write(entitySetVar);

#line default
#line hidden
#nullable disable
        WriteLiteral(".ToListAsync();\r\n            ");
        WriteLiteral("return View(result.ToPagedList(pageNumber, pageSize));\r\n");
#nullable restore
#line 828 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
        else
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("var result = await ");
#nullable restore
#line 831 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                             Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(".ToListAsync();\r\n            ");
        WriteLiteral("return View(result.ToPagedList(pageNumber, pageSize));\r\n");
#nullable restore
#line 833 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
    }

    void RenderIndexFooter()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            }\r\n        ");
#nullable restore
#line 840 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 845 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region API Index Functions
    void RenderApiSelectBlock(dynamic entitySetName, ApiAttribute isList)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            int pageSize = 8;\r\n            int pageNumber = (page ?? 1);        \r\n\r\n            _genericApiService.SetBaseUrl(\"");
#nullable restore
#line 853 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                       Write(isList.BaseUrl);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n            List");
#nullable restore
#line 854 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
            Write($"<{entitySetName}> {entitySetName.ToLower()}");

#line default
#line hidden
#nullable disable
        WriteLiteral(" = await _genericApiService.ApiGet");
#nullable restore
#line 854 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                               Write($"<List<{entitySetName}>>");

#line default
#line hidden
#nullable disable
        WriteLiteral("($\"");
#nullable restore
#line 854 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                               Write(isList.EndPoint);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n\r\n        ");
#nullable restore
#line 856 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderPaginatedApiSelectBlock(dynamic entitySetName, ApiAttribute isPaginated)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            int pageSize = 8;\r\n            int pageNumber = (page ?? 1);        \r\n\r\n            _genericApiService.SetBaseUrl(\"");
#nullable restore
#line 865 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                       Write(isPaginated.BaseUrl);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n            PaginatedListWrapper");
#nullable restore
#line 866 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                            Write($"<{entitySetName}> {entitySetName.ToLower()}");

#line default
#line hidden
#nullable disable
        WriteLiteral(" = await _genericApiService.ApiGet");
#nullable restore
#line 866 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                               Write($"<PaginatedListWrapper<{entitySetName}>>");

#line default
#line hidden
#nullable disable
        WriteLiteral("($\"");
#nullable restore
#line 866 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                               Write(isPaginated.EndPoint);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n\r\n        ");
#nullable restore
#line 868 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderPaginatedApiIndexReturn(dynamic entitySetName, dynamic primaryKeyName, Dictionary<string, dynamic> relatedProperties, dynamic lambdaVar, dynamic entitySetVar)
    {

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("var result = new StaticPagedList<");
#nullable restore
#line 873 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                       Write(entitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(">(");
#nullable restore
#line 873 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                         Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(".PaginatedList, pageNumber, pageSize, int.Parse(");
#nullable restore
#line 873 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                   Write(entitySetName.ToLower());

#line default
#line hidden
#nullable disable
        WriteLiteral(".ResultsCount));\r\n\t\t");
        WriteLiteral("ViewBag.OnePageOfUsers = result;\r\n        ");
        WriteLiteral("\r\n        ");
        WriteLiteral("return View(result);\r\n");
#nullable restore
#line 877 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
    }

    #endregion    

#line default
#line hidden
#nullable disable
#nullable restore
#line 882 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Details Functions

    void RenderDetailsHeader(List<PropertyInfo> composedProps,dynamic primaryKeyNullableTypeName)
    {
        if (composedProps.Count > 0)
        {
            string header = $"public async Task<IActionResult> Details({primaryKeyNullableTypeName} id, ";
            for (int i = 0; i < composedProps.Count(); i++)
            {
                var composition = GetAttributesPropsOfProperty(composedProps[i], "AspAdminTemplate.Attributes.CompositionAttribute");
                string composionForeignKeyValue = composition == null ? "null" : composition.Value.props.First(x => x.Name == "ForeignKey").GetValue(composition.Value.attribute);
                string composedPropsName = composedProps[i].PropertyType.GetGenericArguments()[0].Name;
                string composedPropsNameFirstLetterLowerCase = composedPropsName[0].ToString().ToLower() + composedPropsName.Substring(1);

                header += $"int? {composedPropsNameFirstLetterLowerCase}Page";
                if (i + 1 != composedProps.Count())
                {
                    header += ",";
                }
            }
            header += ")";


#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
#nullable restore
#line 905 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
         Write(header);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            ");
        WriteLiteral("{\r\n");
#nullable restore
#line 907 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
        else
        {
            

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                public async Task<IActionResult> Details(");
#nullable restore
#line 911 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                    Write(primaryKeyNullableTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" id)\r\n                {\r\n            ");
#nullable restore
#line 913 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                   
        }
    }

    void RenderCheckIdBlock()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral(@"
            if (id == null)
            {
                if (TempData[""Id""] != null)
                {
                    id = int.Parse(TempData[""Id""].ToString());
                }
                else
                {
                    return NotFound();
                }
            }
        ");
#nullable restore
#line 931 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderGetDetailBlock(dynamic entitySetName,dynamic inlineIncludes,dynamic primaryKeyName)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            var ");
#nullable restore
#line 937 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = await _context.");
#nullable restore
#line 937 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                  Write(entitySetName);

#line default
#line hidden
#nullable disable
#nullable restore
#line 937 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                 Write(inlineIncludes);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            .FirstOrDefaultAsync(m => m.");
#nullable restore
#line 938 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                   Write(primaryKeyName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" == id);\r\n            if (");
#nullable restore
#line 939 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n        ");
#nullable restore
#line 943 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderTupleViewOrNormalViewReturn(List<PropertyInfo> composedProps,bool isApi=false)
    {
        if (composedProps.Count > 0)
        {
            string tupleVarString = "var tuple = new Tuple<" + Model.ModelTypeName + ",";
            string tupleVarSecondHalfString = ">(" + Model.ModelVariable + ",";
            for (int i = 0; i < composedProps.Count(); i++)
            {
                var composition = GetAttributesPropsOfProperty(composedProps[i], "AspAdminTemplate.Attributes.CompositionAttribute");
                string composionForeignKeyValue = composition == null ? "null" : composition.Value.props.First(x => x.Name == "ForeignKey").GetValue(composition.Value.attribute);
                string composedPropsName = composedProps[i].PropertyType.GetGenericArguments()[0].Name;
                string composedPropsNameFirstLetterLowerCase = composedPropsName[0].ToString().ToLower() + composedPropsName.Substring(1);
                string composedPropsValueString = "";
                string baseUrl = "";
                string endpoint = "";
                bool isPaginated = false;
                if (isApi)
                {
                    baseUrl = composition == null ? "null" : composition.Value.props.FirstOrDefault(x => x.Name == "BaseUrl").GetValue(composition.Value.attribute);
                    endpoint = composition == null ? "null" : composition.Value.props.FirstOrDefault(x => x.Name == "Endpoint").GetValue(composition.Value.attribute);
                    isPaginated =  composition == null ? "null" : composition.Value.props.FirstOrDefault(x => x.Name == "IsPaginated").GetValue(composition.Value.attribute);
                    //TODO add set base url method
                    if (isPaginated)
                    {
                        composedPropsValueString = "PaginatedListWrapper<"+composedPropsName+"> " + Model.ModelVariable + composedPropsName + " = await _genericApiService.ApiGet<PaginatedListWrapper<"+composedPropsName+">>($\""+endpoint+"\");";
                    }
                    else
                    {
                        composedPropsValueString = "var " + Model.ModelVariable + composedPropsName + " = await _genericApiService.ApiGet<List<"+composedPropsName+">>($\""+endpoint+"\");";
                    }
                }
                else
                {
                    composedPropsValueString = "var " + Model.ModelVariable + composedPropsName + " = await _context." + composedPropsName + ".Where(x => x." + composionForeignKeyValue + " == id).ToListAsync();";
                }

                //render the block that get the composed prop data

#line default
#line hidden
#nullable disable
        WriteLiteral("                ");
        WriteLiteral("int ");
#nullable restore
#line 983 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                  Write(composedPropsNameFirstLetterLowerCase);

#line default
#line hidden
#nullable disable
        WriteLiteral("PageSize = 8;\r\n                ");
        WriteLiteral("int ");
#nullable restore
#line 984 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                  Write(composedPropsNameFirstLetterLowerCase);

#line default
#line hidden
#nullable disable
        WriteLiteral("PageNumber = (");
#nullable restore
#line 984 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                        Write(composedPropsNameFirstLetterLowerCase);

#line default
#line hidden
#nullable disable
        WriteLiteral("Page ?? 1);\r\n                ");
#nullable restore
#line 985 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(composedPropsValueString);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 986 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                if(isApi && isPaginated) { 

#line default
#line hidden
#nullable disable
        WriteLiteral("                    ");
        WriteLiteral("var ");
#nullable restore
#line 987 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                      Write(Model.ModelVariable + composedPropsName);

#line default
#line hidden
#nullable disable
        WriteLiteral("Result = new StaticPagedList<");
#nullable restore
#line 987 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                             Write(composedPropsName);

#line default
#line hidden
#nullable disable
        WriteLiteral(">(");
#nullable restore
#line 987 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                   Write(Model.ModelVariable + composedPropsName);

#line default
#line hidden
#nullable disable
        WriteLiteral(".PaginatedList, ");
#nullable restore
#line 987 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                             Write(composedPropsNameFirstLetterLowerCase);

#line default
#line hidden
#nullable disable
        WriteLiteral("PageNumber, ");
#nullable restore
#line 987 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                                                                 Write(composedPropsNameFirstLetterLowerCase);

#line default
#line hidden
#nullable disable
        WriteLiteral("PageSize, int.Parse(");
#nullable restore
#line 987 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                                                                                                                                             Write(Model.ModelVariable + composedPropsName);

#line default
#line hidden
#nullable disable
        WriteLiteral(".ResultsCount));\r\n");
#nullable restore
#line 988 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                }

#line default
#line hidden
#nullable disable
        WriteLiteral("                ");
        WriteLiteral("\r\n");
#nullable restore
#line 990 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"

                //Prepare the first half of the tuple string
                tupleVarString += GetIPagedListTypeExpression(composedProps[i].PropertyType.GetGenericArguments()[0].FullName);
                if (i + 1 != composedProps.Count())
                {
                    tupleVarString += " , ";
                }

                //Prepare the second half of the tuple string
                if(isApi && isPaginated)
                {
                    tupleVarSecondHalfString += Model.ModelVariable + composedPropsName + "Result";
                }
                else
                {
                    tupleVarSecondHalfString += Model.ModelVariable + composedPropsName + $".ToPagedList({composedPropsNameFirstLetterLowerCase}PageNumber, {composedPropsNameFirstLetterLowerCase}PageSize)";
                }
                if (i + 1 != composedProps.Count())
                {
                    tupleVarSecondHalfString += " , ";
                }
            }

            tupleVarString += tupleVarSecondHalfString +  ");";


#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
#nullable restore
#line 1015 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
         Write(tupleVarString);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            ");
        WriteLiteral("return View(tuple);\r\n");
#nullable restore
#line 1017 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
        else
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("return View(");
#nullable restore
#line 1020 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                     Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n");
#nullable restore
#line 1021 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }

    }

    void RenderDetailsFooter()
    {

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("}\r\n");
#nullable restore
#line 1028 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
    }

    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1033 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Details API Functions
    void RenderGetApiDetailBlock(dynamic entitySetName,dynamic primaryKeyName,ApiAttribute isGet)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            _genericApiService.SetBaseUrl(\"");
#nullable restore
#line 1038 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                       Write(isGet.BaseUrl);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n            var ");
#nullable restore
#line 1039 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = await _genericApiService.ApiGet");
#nullable restore
#line 1039 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                  Write($"<{entitySetName}>");

#line default
#line hidden
#nullable disable
        WriteLiteral("($\"");
#nullable restore
#line 1039 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                            Write(isGet.EndPoint);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n            if (");
#nullable restore
#line 1040 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(" == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n        ");
#nullable restore
#line 1044 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1049 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Create View Functions

    void RenderCreateViewHeader(string routePrefix,bool isThisAComposedModel)
    {

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("// GET: ");
#nullable restore
#line 1054 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
             Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("/Create\r\n");
#nullable restore
#line 1055 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        if (isThisAComposedModel)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("public IActionResult Create(int? id)\r\n            ");
        WriteLiteral("{\r\n");
#nullable restore
#line 1059 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
        else
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("public IActionResult Create()\r\n            ");
        WriteLiteral("{\r\n");
#nullable restore
#line 1064 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
    }

    void RenderForeignKeyDisplayAsAttributeViewData(string attributeName, List<PropertyInfo> attributeProps, Dictionary<string, dynamic> relatedProperties)
    {
        foreach (var property in relatedProperties.Values)
        {
            //find if this props has the "ForeignKeyDisplayAs" Attribute
            PropertyInfo prophasForeignKeyDisplayAsAttribute = attributeProps.Find(x => x.Name == property.ForeignKeyPropertyNames[0]);
            if (prophasForeignKeyDisplayAsAttribute != null)
            {
                var foreignKeyDisplayAsAttribute = prophasForeignKeyDisplayAsAttribute.GetCustomAttributes(true);
                foreach (var att in foreignKeyDisplayAsAttribute)
                {
                    if (att.ToString() == attributeName)
                    {
                        //list of props of the attribute ForeignKeyDisplayAsAttribute
                        List<PropertyInfo> foreignKeyDisplayAsAttributeProps = att.GetType().GetProperties().ToList();

                        string CrudFlagValue = foreignKeyDisplayAsAttributeProps.Find(x => x.Name == "CrudFlag").GetValue(att).ToString();
                        if (CrudFlagValue.Contains("Create") || CrudFlagValue.Contains("All"))
                        {
                            string customPropsNameValue = foreignKeyDisplayAsAttributeProps.Find(x => x.Name == "CustomPropsName").GetValue(att).ToString();
                            string stringFormaterValue = foreignKeyDisplayAsAttributeProps.Find(x => x.Name == "StringFormater").GetValue(att).ToString();


#line default
#line hidden
#nullable disable
        WriteLiteral("                            ");
        WriteLiteral("var ");
#nullable restore
#line 1089 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                              Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral("s = _context.");
#nullable restore
#line 1089 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                    Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(".ToList();\r\n                            ");
        WriteLiteral("for (int i = 0; i < ");
#nullable restore
#line 1090 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                              Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral("s.Count(); i++)\r\n                            ");
        WriteLiteral("{\r\n                            ");
#nullable restore
#line 1092 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                          Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral("s[i].");
#nullable restore
#line 1092 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                        Write(customPropsNameValue);

#line default
#line hidden
#nullable disable
        WriteLiteral(" = $\"");
#nullable restore
#line 1092 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                    Write(stringFormaterValue.Replace("{", "{" + property.EntitySetName + "s[i]."));

#line default
#line hidden
#nullable disable
        WriteLiteral("\";\r\n                            ");
        WriteLiteral("}\r\n                            ");
        WriteLiteral("\r\n                            ");
        WriteLiteral("var selectList = new SelectList(_context.");
#nullable restore
#line 1095 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                  Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 1095 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                            Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 1095 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                            Write(customPropsNameValue);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n                            ");
        WriteLiteral("if (id != null)\r\n                            ");
        WriteLiteral("{\r\n                            ");
        WriteLiteral("var selected = selectList.Where(x => x.Value == id.ToString()).First();\r\n                            ");
        WriteLiteral("selected.Selected = true;\r\n                            ");
        WriteLiteral("}\r\n                            ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 1101 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                    Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = selectList;\r\n                            ");
        WriteLiteral("\r\n");
#nullable restore
#line 1103 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
        WriteLiteral("                            ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 1106 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                    Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = new SelectList(_context.");
#nullable restore
#line 1106 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                      Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 1106 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 1106 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                                Write(property.DisplayPropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n");
#nullable restore
#line 1107 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                        }
                    }
                }

            }
            else
            {

#line default
#line hidden
#nullable disable
        WriteLiteral("                ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 1114 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                        Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = new SelectList(_context.");
#nullable restore
#line 1114 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                          Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 1114 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                    Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 1114 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                    Write(property.DisplayPropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n");
#nullable restore
#line 1115 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
            }
        }
    }

    void RenderCreateViewViewData(Dictionary<string, dynamic> relatedProperties)
    {
        foreach (var property in relatedProperties.Values)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("ViewData[\"");
#nullable restore
#line 1123 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    Write(property.ForeignKeyPropertyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\"] = new SelectList(_context.");
#nullable restore
#line 1123 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                      Write(property.EntitySetName);

#line default
#line hidden
#nullable disable
        WriteLiteral(", \"");
#nullable restore
#line 1123 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                Write(property.PrimaryKeyNames[0]);

#line default
#line hidden
#nullable disable
        WriteLiteral("\", \"");
#nullable restore
#line 1123 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                Write(property.DisplayPropertyName);

#line default
#line hidden
#nullable disable
        WriteLiteral("\");\r\n");
#nullable restore
#line 1124 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        }
    }

    void RenderCreateViewFooter()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                return View();\r\n            }\r\n        ");
#nullable restore
#line 1132 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1137 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Create Functions

    void RenderCreateHeader(string routePrefix,string bindString)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            // POST: ");
#nullable restore
#line 1143 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral(@"/Create
            // To protect from overposting attacks, please enable the specific properties you want to bind to, for
            // more details see http://go.microsoft.com/fwlink/?LinkId=317598.
            [HttpPost]
            [ValidateAntiForgeryToken]
            public async Task<IActionResult> Create([Bind(""");
#nullable restore
#line 1148 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                      Write(bindString);

#line default
#line hidden
#nullable disable
        WriteLiteral("\")] ");
#nullable restore
#line 1148 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                     Write(Model.ModelTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" ");
#nullable restore
#line 1148 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                          Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(", string returnUrl)\r\n            {\r\n        ");
#nullable restore
#line 1150 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }


    void RenderCreateFooter()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                return View(");
#nullable restore
#line 1157 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                       Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n            }\r\n        ");
#nullable restore
#line 1159 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1164 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Edit View Functions
    void RenderEditViewHeader(string routePrefix, dynamic primaryKeyNullableTypeName)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            // GET: ");
#nullable restore
#line 1169 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("/Edit/5\r\n            public async Task<IActionResult> Edit(");
#nullable restore
#line 1170 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                             Write(primaryKeyNullableTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" id)\r\n            {\r\n        ");
#nullable restore
#line 1172 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderEditViewFooter()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                return View(");
#nullable restore
#line 1178 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                       Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n            }\r\n        ");
#nullable restore
#line 1180 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1185 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Edit Functions
    void RenderEditHeader(string routePrefix,dynamic primaryKeyShortTypeName,string bindString) 
    { 
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            // POST: ");
#nullable restore
#line 1190 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral(@"/Edit/5
            // To protect from overposting attacks, please enable the specific properties you want to bind to, for
            // more details see http://go.microsoft.com/fwlink/?LinkId=317598.
            [HttpPost]
            [ValidateAntiForgeryToken]
            public async Task<IActionResult> Edit(");
#nullable restore
#line 1195 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                             Write(primaryKeyShortTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" id, [Bind(\"");
#nullable restore
#line 1195 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                 Write(bindString);

#line default
#line hidden
#nullable disable
        WriteLiteral("\")] ");
#nullable restore
#line 1195 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                Write(Model.ModelTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" ");
#nullable restore
#line 1195 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                     Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(",string returnUrl)\r\n            {\r\n        ");
#nullable restore
#line 1197 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderEditFooter() 
    { 
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                return View(");
#nullable restore
#line 1203 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                       Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n            }\r\n        ");
#nullable restore
#line 1205 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1210 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Delete View Functions
    void RenderDeleteViewHeader(string routePrefix,dynamic primaryKeyNullableTypeName)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            // GET: ");
#nullable restore
#line 1215 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("/Delete/5\r\n            public async Task<IActionResult> Delete(");
#nullable restore
#line 1216 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                               Write(primaryKeyNullableTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" id)\r\n            {\r\n        ");
#nullable restore
#line 1218 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderDeleteViewFooter()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                return View(");
#nullable restore
#line 1224 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                       Write(Model.ModelVariable);

#line default
#line hidden
#nullable disable
        WriteLiteral(");\r\n            }\r\n        ");
#nullable restore
#line 1226 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1231 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region Delete Functions
    void RenderDeleteHeader(string routePrefix,dynamic primaryKeyShortTypeName)
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n            // POST: ");
#nullable restore
#line 1236 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                Write(routePrefix);

#line default
#line hidden
#nullable disable
        WriteLiteral("/Delete/5\r\n            [HttpPost, ActionName(\"Delete\")]\r\n            [ValidateAntiForgeryToken]\r\n            public async Task<IActionResult> DeleteConfirmed(");
#nullable restore
#line 1239 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                        Write(primaryKeyShortTypeName);

#line default
#line hidden
#nullable disable
        WriteLiteral(" id,string returnUrl)\r\n            {\r\n        ");
#nullable restore
#line 1241 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }

    void RenderDeleteFooter()
    {
        

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                return Redirect(returnUrl);\r\n            }\r\n        ");
#nullable restore
#line 1249 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
               
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1254 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region API Related Types
    class ApiAttribute{
        public bool IsExist { get; set; }
        public int Index { get; set; }
        public string BaseUrl { get; set; }
        public string EndPoint { get; set; }

        public ApiAttribute(bool isExist,int index,string baseUrl,string endPoint)
        {
            IsExist = isExist;
            Index = index;
            BaseUrl = baseUrl;
            EndPoint = endPoint;
        }
    }
    #endregion

    #region API Related Function

    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1277 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    #region default sort Types
    class DefaultSortAttribute{
        public bool IsExist { get; set; }
        public string PropName { get; set; }
        public bool IsAsc { get; set; }

        public DefaultSortAttribute(bool isExist,string propName,bool isAsc)
        {
            IsExist = isExist;
            PropName = propName;
            IsAsc = isAsc;
        }
    }
    #endregion

    #region default sort related Function
    DefaultSortAttribute GetDefaultSort()
    {
        DefaultSortAttribute defaultSort = new DefaultSortAttribute(false,"",true);

        (PropertyInfo prop,PropertyInfo[] attributeProps, dynamic attribute)? result = GetAttributeOfPropByNameAndGetItsProps("AspAdminTemplate.Attributes.DefaultSort");
        if (result != null)
        {
            defaultSort.IsExist = true;

            defaultSort.PropName = result.Value.prop.Name;

            string sortTypeString = result.Value.attributeProps.FirstOrDefault(x => x.Name == "SortType").GetValue(result.Value.attribute).toString();
            if (sortTypeString.Contains("Desc"))
            {
                defaultSort.IsAsc = false;
            }
        }

        return defaultSort;
    }

    string GetOrderByString(bool isAsc)
    {
        return isAsc ? "OrderBy" : "OrderByDescending";
    }
    #endregion

#line default
#line hidden
#nullable disable
#nullable restore
#line 1323 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
 
    // This function converts the primary key short type name to its nullable equivalent when possible. This is required to make
    // sure that an HTTP 400 error is thrown when the user tries to access the edit, delete, or details action with null values.
    string GetNullableTypeName(string typeName, string shortTypeName)
    {
        // The exceptions are caught because if for any reason the type is user defined, then the short type name will be used.
        // In that case the user will receive a server error if null is passed to the edit, delete, or details actions.
        Type primaryKeyType = null;
        try
        {
            primaryKeyType = Type.GetType(typeName);
        }
        catch
        {
        }
        if (primaryKeyType != null && (!Microsoft.VisualStudio.Web.CodeGeneration.Templating.TypeUtilities.IsNullable(primaryKeyType) || IsGuid(typeName)))
        {
            return shortTypeName + "?";
        }
        return shortTypeName;
    }

    bool IsGuid(string typeName)
    {
        return String.Equals("System.Guid", typeName, StringComparison.OrdinalIgnoreCase);
    }

    string GetDotToListString(bool returnListInsteadOfEmpty)
    {
        return returnListInsteadOfEmpty ? ".ToList()" : "";
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 1356 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
           
    string GetIPagedListTypeExpression(string typeName)
    {
        return "X.PagedList.IPagedList<" + typeName + ">";
    }

    void GetCustomAttributesWithThierDataTest()
    {
        Type modelType = Model.ModelMetadata.ModelType;

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("/*1)ModelType:*/ ");
#nullable restore
#line 1365 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                      Write(Model.ModelMetadata.ModelType);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n        ");
        WriteLiteral("/*2)ModelType Name:*/ ");
#nullable restore
#line 1366 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                           Write(modelType.Name);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 1367 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        //Returns all the public properties of the current Type.
        PropertyInfo[] props = modelType.GetProperties();

#line default
#line hidden
#nullable disable
        WriteLiteral("        ");
        WriteLiteral("/*props count:*/ ");
#nullable restore
#line 1369 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                      Write(props.Count());

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 1370 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
        foreach (PropertyInfo prop in props)
        {

#line default
#line hidden
#nullable disable
        WriteLiteral("            ");
        WriteLiteral("/*2.1)PropName:*/ ");
#nullable restore
#line 1372 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                           Write(prop.Name);

#line default
#line hidden
#nullable disable
        WriteLiteral(" | /*PropType:*/ ");
#nullable restore
#line 1372 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                      Write(prop.PropertyType);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 1373 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
            foreach (var att in prop.GetCustomAttributes(true))
            {

#line default
#line hidden
#nullable disable
        WriteLiteral("                ");
        WriteLiteral("/*2.1.1)AttributeType:*/ ");
#nullable restore
#line 1375 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                      Write(att.ToString());

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                ");
        WriteLiteral("/*2.1.2)Is this the searchable Attributes:*/ ");
#nullable restore
#line 1376 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                           Write(att.ToString() == "AspAdminTemplate.Attributes.SearchableAttribute");

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n                ");
        WriteLiteral("/*2.1.3)Attribute Type Name:*/ ");
#nullable restore
#line 1377 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                            Write(att.GetType().Name);

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 1378 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"




                if (att.ToString() == "AspAdminTemplate.Attributes.SearchableAttribute")
                {
                    PropertyInfo[] attProps = att.GetType().GetProperties();
                    foreach (PropertyInfo attProp in attProps)
                    {

#line default
#line hidden
#nullable disable
        WriteLiteral("                        ");
        WriteLiteral("/*2.1.4.1)Attribute Prop name:*/ ");
#nullable restore
#line 1387 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                      Write(attProp.Name);

#line default
#line hidden
#nullable disable
        WriteLiteral(" | /*Attribute prop type:*/ ");
#nullable restore
#line 1387 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                               Write(attProp.PropertyType);

#line default
#line hidden
#nullable disable
        WriteLiteral(" | /*Attribute prop Value:*/ ");
#nullable restore
#line 1387 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                                                                                                                                                 Write(attProp.GetValue(att));

#line default
#line hidden
#nullable disable
        WriteLiteral("\r\n");
#nullable restore
#line 1388 "C:\Users\NewTech_Dell_5570\Desktop\asp_admin - Copie\AspAdminTemplate\Templates\ControllerGenerator\MvcControllerWithContext.cshtml"
                    }
                }
            }
        }
    }

    (PropertyInfo prop,PropertyInfo[] attributeProps, dynamic attribute)? GetAttributeOfPropByNameAndGetItsProps(string attributeName)
    {
        List<PropertyInfo> resultProps = new List<PropertyInfo>();
        Type modelType = Model.ModelMetadata.ModelType;
        PropertyInfo[] props = modelType.GetProperties();
        //Loop props
        foreach (PropertyInfo prop in props)
        {
            //loop Props Attributes
            foreach (var att in prop.GetCustomAttributes(true))
            {
                //if this prop has the att that we are looking for.
                if (att.ToString() == attributeName)
                {
                    return (prop,att.GetType().GetProperties(), att);
                }
            }
        }

        return null;
    }

    List<PropertyInfo> GetPropsByAttribute(string attributeName)
    {
        List<PropertyInfo> resultProps = new List<PropertyInfo>();
        Type modelType = Model.ModelMetadata.ModelType;
        PropertyInfo[] props = modelType.GetProperties();
        //Loop props
        foreach (PropertyInfo prop in props)
        {
            //loop Props Attributes
            foreach (var att in prop.GetCustomAttributes(true))
            {
                //if this prop has the att that we are looking for.
                if (att.ToString() == attributeName)
                {
                    resultProps.Add(prop);
                }
            }
        }

        return resultProps;
    }

    string GetAttributeValue(PropertyInfo propertyThatHasTheAttribute, string attributeName, string propertyName)
    {
        //loop Props Attributes
        foreach (var att in propertyThatHasTheAttribute.GetCustomAttributes(true))
        {
            //if this prop has the att that we are looking for.
            if (att.ToString() == attributeName)
            {
                PropertyInfo[] attProps = att.GetType().GetProperties();
                foreach (PropertyInfo attProp in attProps)
                {
                    if (attProp.Name.ToString().Equals(propertyName))
                    {
                        return attProp.GetValue(att).ToString();
                    }
                }
            }
        }
        return "";
    }

    (PropertyInfo[] props, dynamic attribute)? GetModelClassCustomAttributesProperties(string attributeName)
    {
        Type modelType = Model.ModelMetadata.ModelType;
        foreach (var att in modelType.GetCustomAttributes(true))
        {
            if (att.ToString() == attributeName)
            {
                return (att.GetType().GetProperties(), att);
            }
        }

        return null;
    }

    List<(PropertyInfo[] props, dynamic attribute)> GetModelClassCustomAttributesListProperties(string attributeName)
    {
        List<(PropertyInfo[] props, dynamic attribute)> list = new List<(PropertyInfo[] props, dynamic attribute)>();
        Type modelType = Model.ModelMetadata.ModelType;
        foreach (var att in modelType.GetCustomAttributes(true))
        {
            if (att.ToString() == attributeName)
            {
                list.Add((att.GetType().GetProperties(), att));
            }
        }

        return list;
    }

    (PropertyInfo[] props, dynamic attribute)? GetAttributesPropsOfProperty(PropertyInfo prop, string attributeName)
    {
        foreach (var att in prop.GetCustomAttributes(true))
        {
            if (att.ToString() == attributeName)
            {
                return (att.GetType().GetProperties(), att);
            }
        }

        return null;
    }

    bool IsThisClassHasAttribute(string attributeName)
    {
        Type modelType = Model.ModelMetadata.ModelType;
        foreach (var att in modelType.GetCustomAttributes(true))
        {
            if (att.ToString() == attributeName)
            {
                return true;
            }
        }

        return false;
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
